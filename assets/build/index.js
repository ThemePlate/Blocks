!function(){"use strict";var e={n:function(t){var l=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(l,{a:l}),l},d:function(t,l){for(var n in l)e.o(l,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:l[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.blocks,l=window.wp.element,n=window.wp.blockEditor,a=window.wp.components,r=window.wp.data,o=window.wp.serverSideRender,c=e.n(o),s=window.ThemePlate_Blocks||{ajax_url:"",_wpnonce:"",collection:{}},i=(e,t,r)=>{switch(e.type){default:case"text":case"time":case"email":case"url":case"date":case"number":return(0,l.createElement)(a.TextControl,{type:e.type,label:e.title,help:e?.help||"",value:t[e.key],onChange:t=>r({[e.key]:t})});case"textarea":return(0,l.createElement)(a.TextareaControl,{label:e.title,help:e?.help||"",value:t[e.key],onChange:t=>r({[e.key]:t})});case"select":case"select2":return(0,l.createElement)(a.SelectControl,{label:e.title,help:e?.help||"",value:t[e.key],options:e.options,onChange:t=>r({[e.key]:t})});case"radiolist":case"radio":return(0,l.createElement)(a.RadioControl,{label:e.title,help:e?.help||"",selected:t[e.key],options:e.options,onChange:t=>r({[e.key]:t})});case"checklist":case"checkbox":return(0,l.createElement)(a.BaseControl,{help:e?.help||""},(0,l.createElement)(a.BaseControl.VisualLabel,null,e.title),0===e.options.length&&(0,l.createElement)(a.CheckboxControl,{label:e.title,checked:"true"===t[e.key],onChange:t=>r({[e.key]:t.toString()})}),0!==e.options.length&&(0,l.createElement)(l.Fragment,null,e.options.map((n=>(0,l.createElement)(a.CheckboxControl,{key:n.value,label:n.label,checked:t[e.key]===n.value,onChange:()=>r({[e.key]:n.value})})))));case"color":return(0,l.createElement)(a.BaseControl,{help:e?.help||""},(0,l.createElement)(a.BaseControl.VisualLabel,null,e.title),(0,l.createElement)(a.ColorPicker,{color:t[e.key],onChange:t=>r({[e.key]:t}),enableAlpha:!0}));case"range":return(0,l.createElement)(a.RangeControl,{label:e.title,help:e?.help||"",value:parseInt(t[e.key]),onChange:t=>r({[e.key]:t.toString()}),afterIcon:(0,l.createElement)("strong",null,t[e.key]),withInputField:!1});case"html":return(0,l.createElement)(l.RawHTML,null,t[e.key]);case"group":return(0,l.createElement)(a.BaseControl,{help:e?.help||""},(0,l.createElement)(a.BaseControl.VisualLabel,null,e.title),(0,l.createElement)(u,{list:e.fields,attributes:t[e.key],setAttributes:l=>{r({[e.key]:{...t[e.key],...l}})}}));case"link":const[o,c]=(0,l.useState)(!1);return(0,l.createElement)(a.BaseControl,{help:e?.help||""},(0,l.createElement)(a.BaseControl.VisualLabel,null,e.title),(0,l.createElement)(l.Fragment,null,(0,l.createElement)(a.Flex,{gap:6,align:"center",justify:"flex-start"},(0,l.createElement)(a.FlexItem,null,(0,l.createElement)(a.Button,{variant:"secondary",onClick:()=>c(!0)},"Select")),(0,l.createElement)(a.FlexItem,null,(0,l.createElement)(a.ExternalLink,{href:t[e.key].url},t[e.key].title))),o&&(0,l.createElement)(a.Modal,{focusOnMount:!0,shouldCloseOnEsc:!0,shouldCloseOnClickOutside:!0,title:"Insert/edit link",onRequestClose:()=>c(!1)},(0,l.createElement)(a.TextControl,{type:"text",label:"Link text",value:t[e.key].title,onChange:l=>r({[e.key]:{...t[e.key],title:l}})}),(0,l.createElement)(n.__experimentalLinkControl,{value:t[e.key],onChange:t=>r({[e.key]:t})}))));case"file":return(0,l.createElement)(a.BaseControl,null,(0,l.createElement)(a.BaseControl.VisualLabel,null,e.title),(0,l.createElement)(n.MediaUpload,{label:e.title,value:t[e.key].id,onSelect:t=>r({[e.key]:{id:t.id,url:t.url,title:t.title}}),render:n=>{let{open:r}=n;return(0,l.createElement)(a.Flex,{gap:4,align:"center",justify:"flex-start"},(0,l.createElement)(a.FlexItem,null,(0,l.createElement)(a.Button,{variant:"secondary",onClick:r},"Select")),(0,l.createElement)(a.FlexItem,{isBlock:!0},(0,l.createElement)(a.Placeholder,null,t[e.key]?.url&&(0,l.createElement)(a.ResponsiveWrapper,null,(0,l.createElement)("img",{src:t[e.key].url,alt:t[e.key].title})))))}}));case"editor":case"type":case"post":case"page":case"user":case"term":return(0,l.createElement)(a.BaseControl,{help:e?.help||""},(0,l.createElement)(a.BaseControl.VisualLabel,null,e.title),(0,l.createElement)(a.Tip,null,(0,l.createElement)("strong",null,"TODO!")," Field ",(0,l.createElement)("code",null,e.type)))}};function u(e){const{list:t,attributes:n,setAttributes:r}=e;return(0,l.createElement)(l.Fragment,null,t.map((e=>(0,l.createElement)(a.PanelRow,{key:e.key,className:["themeplate-blocks-field",`field-${e.class}`]},i(e,n,r)))))}function m(e){const[o,i]=(0,l.useState)([]),[m,p]=(0,l.useState)(!0),[k,d]=(0,l.useState)(!1),h=(0,n.useBlockProps)(),{attributes:E,setAttributes:y}=e,b=(0,r.useSelect)((t=>t(n.store).getBlock(e.clientId)),[e]),C=(0,t.getBlockType)(b.name),g=(0,t.getBlockContent)(b),w=s.collection[h["data-type"]].inner_blocks;return(0,l.useMemo)((()=>{fetch(s.ajax_url,{method:"POST",body:new URLSearchParams({_wpnonce:s._wpnonce,action:"themeplate_blocks_fields",block:h["data-type"]})}).then((e=>e.json())).then((e=>{i(e.data),d(!0)}))}),[]),(0,l.createElement)(l.Fragment,null,(0,l.createElement)(n.InspectorControls,null,!k&&0===o.length&&(0,l.createElement)(a.Placeholder,null,(0,l.createElement)(a.Spinner,null)),k&&0!==o.length&&(0,l.createElement)(a.PanelBody,{className:"themeplate-blocks-fields"},(0,l.createElement)(u,{list:o,attributes:E,setAttributes:y}))),w&&(0,l.createElement)(n.BlockControls,null,(0,l.createElement)(a.ToolbarGroup,null,(0,l.createElement)(a.ToolbarButton,{icon:m?"visibility":"hidden",label:m?"Switch to insert inner blocks":"Switch to preview rendered block",onClick:()=>p(!m)}))),(0,l.createElement)("div",{className:"wp-block-themeplate",onDoubleClick:e=>{const t=e.target.dataset;t?.block&&t?.type||p(!m)}},(!w||!0===m)&&(0,l.createElement)(c(),{block:h["data-type"],attributes:{...E,innerBlockContent:g},className:"block-editor-server-side-render"}),w&&!1===m&&(0,l.createElement)(n.InnerBlocks,{allowedBlocks:C.allowed_blocks,template:C.template_blocks,templateLock:C.template_lock,renderAppender:n.InnerBlocks.ButtonBlockAppender})))}function p(){return(0,l.createElement)(n.InnerBlocks.Content,null)}Object.keys(s.collection).forEach((e=>{(0,t.registerBlockType)(e,{edit:m,save:p,...s.collection[e]})}))}();